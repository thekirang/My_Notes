ğŸ§  Backups and Migrations Notes (RedHat 8+)

==========================================
1. Backup Tools Overview
==========================================

Tool     | Purpose
---------|--------------------------------------------------------
cp       | Simple file/directory copy.
tar      | Archive multiple files into .tar files.
rsync    | Efficient backups and mirroring (local or remote).
scp      | Secure file copy between servers (SSH-based).
dd       | Raw disk cloning (full image backup).

==========================================
2. Quick Backups with tar
==========================================

ğŸ”¹ Create a Compressed Backup:
tar -czvf backup-home-$(date +%F).tar.gz /home

this backed up /home and saving in current location, tar will pack them together and -z will compress in .gz

Options:
  c = create archive
  z = gzip compression
  v = verbose output
  f = file name
  $(date +%F) = today's date (e.g., 2025-04-29)

ğŸ”¹ Extract a Backup:
tar -xzvf backup-home-2025-04-28.tar.gz -C /restore/location

==========================================
3. Fast and Smart Backup with rsync
==========================================

ğŸ”¹ Local Folder to Folder Backup:
rsync -avh /source/folder/ /backup/folder/

Options:
  -a = archive (preserves permissions, timestamps)
  -v = verbose
  -h = human-readable sizes

ğŸ”¹ Backup Over Network (Remote Server):
rsync -avh /local/folder/ user@remote-server:/backup/folder/

Example:
rsync -avh /home/user/docs/ admin@192.168.1.50:/backup/docs/

ğŸ”¹ Important rsync Flags:
  --delete     â†’ Deletes destination files not present in source
  --progress   â†’ Shows progress during transfer
  --dry-run    â†’ Simulates changes without actually copying/deleting

Example with all:
rsync -avh --delete --progress /home/user/docs/ admin@192.168.1.50:/backup/docs/

==========================================
4. Copy Over Network with scp
==========================================

ğŸ”¹ Copy a File to Remote Server:
scp /path/to/file user@remote-server:/path/to/destination

ğŸ”¹ Copy a Folder Recursively:
scp -r /path/to/folder user@remote-server:/path/to/destination

==========================================
5. Disk Cloning with dd (âš ï¸ Use Carefully)
==========================================

ğŸ”¹ Clone Entire Disk:
dd if=/dev/sda of=/dev/sdb bs=4M status=progress

ğŸ”¹ Backup Disk to Image File:
dd if=/dev/sda of=/backup/disk-backup.img bs=4M status=progress

ğŸ”¹ Restore Disk from Image File:
dd if=/backup/disk-backup.img of=/dev/sda bs=4M status=progress

==========================================
6. Backup Important Config Files ğŸ“
==========================================

mkdir /backup/etc-configs
cp -r /etc/* /backup/etc-configs/

Essential Files to Backup:
  /etc/passwd
  /etc/group
  /etc/shadow
  /etc/fstab
  /etc/ssh/
  /etc/httpd/   (for web server configs)

==========================================
7. Scheduled Daily Backup with Cron
==========================================

ğŸ”¹ Edit Crontab:
crontab -e

ğŸ”¹ Add Job to Run Daily at 2 AM:
0 2 * * * rsync -avh /important/data/ /backup/daily/

==========================================
ğŸ”¥ Key Tips for Backups & Migrations
==========================================

âœ” Always backup before major system changes.
âœ” Verify backups manually â€” donâ€™t assume!
âœ” Use rsync for smart, incremental backups.
âœ” Maintain at least one off-site/off-server copy.
âœ” Use tar for full folder packaging (snapshots).
âœ” Use scp for quick, secure file transfers over SSH.

==========================================
ğŸš€ Pro Tip: Rsync with Compression
==========================================

rsync -avz /source/ user@remote:/dest/
  -z = enables compression (saves bandwidth)

==========================================
âœ… End of Notes
==========================================
